(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2d0ba6e6"],{"36d1":function(e,t,a){"use strict";a.r(t);var o=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("el-card",{staticClass:"box-card"},[a("div",{staticStyle:{display:"block","font-size":"10px"}},[a("el-button",{attrs:{type:"success",icon:"el-icon-plus"},on:{click:function(t){return e.adduser()}}},[e._v("新增用户")]),a("el-input",{staticStyle:{width:"130px",height:"10px"},attrs:{icon:"el-icon-plus",placeholder:"输入名字搜索"},model:{value:e.search,callback:function(t){e.search=t},expression:"search"}})],1),a("el-table",{staticStyle:{width:"100%"},attrs:{data:e.tableData.filter((function(t){return!e.search||t.name.toLowerCase().includes(e.search.toLowerCase())}))}},[a("el-table-column",{attrs:{label:"学号",prop:"number"}}),a("el-table-column",{attrs:{label:"姓名",prop:"name"}}),a("el-table-column",{attrs:{label:"昵称",prop:"nickname"}}),a("el-table-column",{attrs:{label:"性别",prop:"sex"}}),a("el-table-column",{attrs:{label:"身份",prop:"role"}}),a("el-table-column",{attrs:{label:"电话",prop:"phone"}}),a("el-table-column",{attrs:{label:"所在学校",prop:"school"}}),a("el-table-column",{attrs:{label:"所在学院",prop:"department"}}),a("el-table-column",{attrs:{align:"right"},scopedSlots:e._u([{key:"header",fn:function(e){}},{key:"default",fn:function(t){return[a("el-button",{attrs:{size:"mini"},on:{click:function(a){return e.handleEdit(t.$index,t.row)}}},[e._v("编辑")]),a("el-button",{attrs:{size:"mini"},on:{click:function(a){return e.handleDelete(t.$index,t.row)}}},[e._v("删除")]),a("el-button",{attrs:{size:"mini"},on:{click:function(a){return e.Initialization(t.$index,t.row)}}},[e._v("重置密码")])]}}])})],1),a("el-dialog",{attrs:{title:"新增用户",visible:e.dialogVisible,width:"60%","before-close":e.handleClose},on:{"update:visible":function(t){e.dialogVisible=t}}},[a("el-form",{ref:"user",attrs:{model:e.user,"label-width":"80px",rules:e.rules}},[a("el-form-item",{attrs:{label:"学号"}},[a("el-input",{model:{value:e.user.number,callback:function(t){e.$set(e.user,"number",t)},expression:"user.number"}})],1),a("el-form-item",{attrs:{label:"姓名"}},[a("el-input",{model:{value:e.user.name,callback:function(t){e.$set(e.user,"name",t)},expression:"user.name"}})],1),a("el-form-item",{attrs:{label:"昵称"}},[a("el-input",{model:{value:e.user.nickname,callback:function(t){e.$set(e.user,"nickname",t)},expression:"user.nickname"}})],1),a("el-form-item",{attrs:{label:"性别"}},[a("div",{staticClass:"block"},[a("el-cascader",{attrs:{options:e.options1,placeholder:e.user.sex},on:{change:e.handleChange},model:{value:e.user.sex,callback:function(t){e.$set(e.user,"sex",t)},expression:"user.sex"}})],1)]),a("el-form-item",{attrs:{label:"身份"}},[a("div",{staticClass:"block"},[a("el-cascader",{attrs:{options:e.options2,placeholder:e.user.role},on:{change:e.handleChange},model:{value:e.user.role,callback:function(t){e.$set(e.user,"role",t)},expression:"user.role"}})],1)]),a("el-form-item",{attrs:{label:"电话号码",prop:"phone"}},[a("el-input",{model:{value:e.user.phone,callback:function(t){e.$set(e.user,"phone",t)},expression:"user.phone"}})],1),a("el-form-item",{attrs:{label:"选择院校"}},[a("div",{staticClass:"block"},[a("el-cascader",{attrs:{options:e.options},on:{change:e.handleChange},model:{value:e.value,callback:function(t){e.value=t},expression:"value"}})],1)]),a("el-form-item",[a("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.onSubmit("user")}}},[e._v("确定")]),a("el-button",{on:{click:function(t){e.dialogVisible=!1}}},[e._v("取消")])],1)],1)],1),a("el-dialog",{attrs:{title:"编辑用户",visible:e.dialogVisible2,width:"60%","before-close":e.handleClose},on:{"update:visible":function(t){e.dialogVisible2=t}}},[a("el-form",{ref:"user",attrs:{model:e.user,"label-width":"80px",rules:e.rules}},[a("el-form-item",{attrs:{label:"学号"}},[a("el-input",{model:{value:e.user.number,callback:function(t){e.$set(e.user,"number",t)},expression:"user.number"}})],1),a("el-form-item",{attrs:{label:"姓名"}},[a("el-input",{model:{value:e.user.name,callback:function(t){e.$set(e.user,"name",t)},expression:"user.name"}})],1),a("el-form-item",{attrs:{label:"昵称"}},[a("el-input",{model:{value:e.user.nickname,callback:function(t){e.$set(e.user,"nickname",t)},expression:"user.nickname"}})],1),a("el-form-item",{attrs:{label:"性别"}},[a("div",{staticClass:"block"},[a("el-cascader",{attrs:{options:e.options1,placeholder:e.user.sex},on:{change:e.handleChange1},model:{value:e.user.sex,callback:function(t){e.$set(e.user,"sex",t)},expression:"user.sex"}})],1)]),a("el-form-item",{attrs:{label:"身份"}},[a("el-cascader",{attrs:{options:e.options2,placeholder:e.user.role},on:{change:e.handleChange2},model:{value:e.user.role,callback:function(t){e.$set(e.user,"role",t)},expression:"user.role"}})],1),a("el-form-item",{attrs:{label:"电话号码",prop:"phone"}},[a("el-input",{model:{value:e.user.phone,callback:function(t){e.$set(e.user,"phone",t)},expression:"user.phone"}})],1),a("el-form-item",{attrs:{label:"选择院校"}},[a("div",{staticClass:"block"},[a("el-cascader",{attrs:{options:e.options,placeholder:e.temp},on:{change:e.handleChange},model:{value:e.value,callback:function(t){e.value=t},expression:"value"}})],1)]),a("el-form-item",[a("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.edit("user")}}},[e._v("确定")]),a("el-button",{on:{click:function(t){e.dialogVisible2=!1}}},[e._v("取消")])],1)],1)],1)],1),a("el-pagination",{attrs:{background:"",layout:"prev, pager, next","page-size":"8",total:e.total},on:{"current-change":e.pagetemp}})],1)},l=[],n=(a("7f7f"),{data:function(){var e=function(e,t,a){if(11!=t.length)return a(new Error("手机号码应该为11位"));a()};return{rules:{phone:[{validator:e,trigger:"blur"}]},typed:"",temp:"福建师范大学/音乐学院",total:null,pageNum:null,page:{pageNum:1,pageSize:6},dialogVisible:!1,dialogVisible2:!1,user:{number:"190327064111",name:"王小虎",sex:"男",role:"教师",phone:"1335855555",school:"福州大学",department:"数学与计算机科学"},dicd:{typed:""},userinfo:{number:"190327064111",name:"王小虎",sex:"男",role:"教师",phone:"1335855555",school:"福州大学",department:"数学与计算机科学"},editUser:{user:{number:"190327064111",name:"王小虎",sex:"男",role:"教师",phone:"1335855555",school:"福州大学",department:"数学与计算机科学"},oldnumber:""},tableData:[{}],search:"",value:["",""],options1:[{label:"男",value:"男"},{label:"女",value:"女"}],options2:[{label:"教师",value:"教师"},{label:"学生",value:"学生"}],options:[{value:"福州大学",label:"福州大学",children:[{value:"数学与计算机科学学院",label:"数学与计算机科学学院"},{value:"经济与管理学院",label:"经济与管理学院"}]},{value:"福建师范大学",label:"福建师范大学",children:[{value:"软件学院",label:"软件学院"},{value:"音乐学院",label:"音乐学院"}]},{value:"厦门大学",label:"厦门大学",children:[{value:"国际关系学院",label:"国际关系学院"},{value:"管理学院",label:"管理学院"}]}]}},methods:{Initialization:function(e,t){var a=this;this.$axios.post("http://47.112.239.108:8080/webuser/setpassword/"+t.number,{},{headers:{Authorization:localStorage.getItem("token")}}).then((function(e){a.$alert("初始化数据成功","初始化数据",{confirmButtonText:"确定",callback:function(e){}})})).catch((function(e){alert(1)}))},handleChange1:function(){},pagetemp:function(e){var t=this;this.pageNum=e,this.$axios.get("http://47.112.239.108:8080/webuser/pagefind/"+this.pageNum,{headers:{Authorization:localStorage.getItem("token")}}).then((function(e){t.tableData=e.data}))},handleEdit:function(e,t){this.editUser.oldnumber=t.number,this.user=t,console.log(this.user),this.temp=t.school+"/"+t.department;var a=this;this.dicd.typed="sex",this.typed="sexy",console.log(this.typed),this.$axios.get("http://47.112.239.108:8080/webdictionary/findAllvalued2/"+this.typed,{headers:{Authorization:localStorage.getItem("token")}}).then((function(e){a.options1=e.data,a.typed="role",a.$axios.get("http://47.112.239.108:8080/webdictionary/findAllvalued2/"+a.typed,{headers:{Authorization:localStorage.getItem("token")}}).then((function(e){console.log(e.data),a.options2=e.data,a.dialogVisible2=!0}))})).catch((function(e){alert(1)}))},adduser:function(e){this.user=[],this.value=[];var t=this;this.typed="sexy",this.$axios.get("http://47.112.239.108:8080/webdictionary/getdefault/"+this.typed,{headers:{Authorization:localStorage.getItem("token")}}).then((function(e){t.user.sex=e.data,t.typed="role",t.$axios.get("http://47.112.239.108:8080/webdictionary/getdefault/"+t.typed,{headers:{Authorization:localStorage.getItem("token")}}).then((function(e){t.user.role=e.data,t.dialogVisible=!0,t.typed="sexy",t.$axios.get("http://47.112.239.108:8080/webdictionary/findAllvalued2/"+t.typed,{headers:{Authorization:localStorage.getItem("token")}}).then((function(e){t.options1=e.data,t.typed="role",t.$axios.get("http://47.112.239.108:8080/webdictionary/findAllvalued2/"+t.typed,{headers:{Authorization:localStorage.getItem("token")}}).then((function(e){console.log(e.data),t.options2=e.data}))}))}))})).catch((function(e){alert(1)}))},handleChange:function(e){console.log(e),this.user.school=e[0],this.user.department=e[1]},edit:function(e){var t=this;this.$refs[e].validate((function(e){if(e){t.dialogVisible2=!1,t.editUser.user=t.user,console.log(t.editUser);var a=t;t.editUser.school=t.user.scholl,t.editUser.department=t.user.department,t.$axios.post("http://47.112.239.108:8080/webuser/updateuser/",t.editUser,{headers:{Authorization:localStorage.getItem("token")}}).then((function(e){a.$message({type:"success",message:e.data}),a.$axios.get("http://47.112.239.108:8080/webuser/pagefind/"+a.pageNum,{headers:{Authorization:localStorage.getItem("token")}}).then((function(e){a.tableData=e.data})).catch((function(e){alert(1)}))}))}else console.log("error submit!!")}))},handleDelete:function(e,t){console.log(this.user),this.user=t,this.$axios.post("http://47.112.239.108:8080/webuser/deleteuser",this.user,{headers:{Authorization:localStorage.getItem("token")}}).then((function(e){a.$message({type:"success",message:e.data}),a.$axios.get("http://47.112.239.108:8080/webuser/pagefind/"+a.pageNum,{headers:{Authorization:localStorage.getItem("token")}}).then((function(e){a.tableData=e.data,console.log(a.tableData)}))})).catch((function(e){alert(1)}));var a=this},addDelete:function(e,t){console.log(e,t)},doAdd:function(e,t){this.dialogVisible=!1},onSubmit:function(e){var t=this,a=this;this.$refs[e].validate((function(e){e?(t.dialogVisible=!1,t.userinfo.number=t.user.number,t.userinfo.name=t.user.name,t.userinfo.sex=t.user.sex,t.userinfo.role=t.user.role,t.userinfo.phone=t.user.phone,t.userinfo.school=t.user.school,t.userinfo.department=t.user.department,t.userinfo.nickname=t.user.nickname,console.log(t.userinfo),t.$axios.post("http://47.112.239.108:8080/webuser/adduser",t.userinfo,{headers:{Authorization:localStorage.getItem("token")}}).then((function(e){a.$message({type:"success",message:e.data}),a.$axios.get("http://47.112.239.108:8080/webuser/totalSize/",{headers:{Authorization:localStorage.getItem("token")}}).then((function(e){a.total=e.data,a.$axios.get("http://47.112.239.108:8080/webuser/pagefind/"+a.pageNum,{headers:{Authorization:localStorage.getItem("token")}}).then((function(e){a.tableData=e.data}))}))})).catch((function(e){alert(1)})),console.log("success")):console.log("error submit!!")}))},handle:function(){}},created:function(){var e=this,t=this;this.$axios.get("http://47.112.239.108:8080/webuser/totalSize/",{headers:{Authorization:localStorage.getItem("token")}}).then((function(e){t.total=e.data})),this.pageNum=1,this.$axios.get("http://47.112.239.108:8080/webuser/pagefind/"+this.pageNum,{headers:{Authorization:localStorage.getItem("token")}}).then((function(e){t.tableData=e.data})).catch((function(t){e.$confirm("token已经过期了，请点击确定重新登录","提示",{confirmButtonText:"确定",type:"warning"}).then((function(){e.$store.commit("LOGIN_OUT"),window.location.reload()}))}))}}),s=n,i=a("2877"),r=Object(i["a"])(s,o,l,!1,null,null,null);t["default"]=r.exports}}]);